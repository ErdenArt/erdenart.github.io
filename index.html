<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New website</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" type="text/css" href="SubPages/missingContent.css">
</head>
<body>
    <audio controls class="audioElement">
        <source src="Music/Yeah.mp3">
    </audio>


    <div class="sidebar-container"> 
        <nav class="sidebar">
            
            <!-- <svg class="sidebar-background" viewBox="0 0 100 100" preserveAspectRatio="none">
                <polygon points="0,0 200,0 100,100 0,100" />
            </svg> -->
            <div class="sidebar-inner">
                <ul class="sidebar-links">
                    <li>
                        <a>
                            <span class="sidebar-icon" aria-hidden="true">#</span>
                            <span class="sidebar-label">Menu</span>
                        </a>
                    </li>
                    <li onclick="clickedSubpage('home')">
                        <a href="#">
                            <span class="sidebar-icon" aria-hidden="true">
                                <svg viewBox="0 0 24 24" role="img" focusable="false">
                                    <path d="M3 11v10h6v-6h6v6h6V11L12 3z" fill="currentColor"/>
                                </svg>
                            </span>
                            <span class="sidebar-label">Home</span>
                        </a>
                    </li>
                    <li onclick="clickedSubpage('projects')">
                        <a href="#projects">
                            <span class="sidebar-icon" aria-hidden="true">
                                <svg viewBox="0 0 24 24" role="img" focusable="false">
                                    <path d="M3 6h6l2 2h10v10H3z" fill="currentColor"/>
                                </svg>
                            </span>
                            <span class="sidebar-label">Projects</span>
                        </a>
                    </li>
                    <li onclick="clickedSubpage('music')">
                        <a href="#music">
                            <span class="sidebar-icon" aria-hidden="true">
                                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32" xml:space="preserve"><path d="M11.857 25.571a1 1 0 0 1-1-1V7.43a1 1 0 0 1 .78-.975l15.142-3.43A1.002 1.002 0 0 1 28 4v17.143a1 1 0 1 1-2 0V5.252L12.857 8.228V24.57a1 1 0 0 1-1 1z"/><path d="M8.429 29C5.986 29 4 27.013 4 24.571s1.986-4.428 4.429-4.428 4.428 1.986 4.428 4.428S10.871 29 8.43 29zm0-6.857A2.431 2.431 0 0 0 6 24.571C6 25.911 7.09 27 8.429 27s2.428-1.09 2.428-2.429a2.431 2.431 0 0 0-2.428-2.428zM23.571 25.571c-2.442 0-4.428-1.986-4.428-4.428s1.986-4.429 4.428-4.429S28 18.701 28 21.144s-1.986 4.427-4.429 4.427zm0-6.857a2.432 2.432 0 0 0-2.428 2.43c0 1.338 1.09 2.427 2.428 2.427S26 22.481 26 21.143c0-1.34-1.09-2.429-2.429-2.429zM11.856 13.28a1 1 0 0 1-.22-1.974L26.78 7.877a1 1 0 1 1 .442 1.95l-15.143 3.429a.986.986 0 0 1-.222.025z"/></svg>
                            </span>
                            <span class="sidebar-label">Music</span>
                        </a>
                    </li>
                    <li onclick="clickedSubpage('algorithms')">
                        <a href="#algorithms">
                            <span class="sidebar-icon" aria-hidden="true">
                                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 24 24" style="enable-background:new 0 0 32 32" xml:space="preserve"><path d="M12 21L10 20M12 21L14 20M12 21V18.5M6 18L4 17V14.5M4 9.5V7M4 7L6 6M4 7L6 8M10 4L12 3L14 4M18 6L20 7M20 7L18 8M20 7V9.5M12 11L10 10M12 11L14 10M12 11V13.5M18 18L20 17V14.5" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            </span>
                            <span class="sidebar-label">Algorithms</span>
                        </a>
                    </li>
                    <li style="position: fixed; bottom: 0; margin-bottom: 10px;" onclick="clickedSettings();">
                        <a>
                            <span class="sidebar-icon" aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M16 11a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3 3 3 0 0 1-3 3z"/><path d="M29 13h-2.42a10.8 10.8 0 0 0-1-2.36l1.71-1.71a1 1 0 0 0 0-1.42l-2.8-2.82a1 1 0 0 0-1.42 0L21.36 6.4a10.8 10.8 0 0 0-2.36-1V3a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v2.42a10.8 10.8 0 0 0-2.36 1L8.93 4.69a1 1 0 0 0-1.42 0L4.69 7.51a1 1 0 0 0 0 1.42l1.71 1.71a10.8 10.8 0 0 0-1 2.36H3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h2.42a10.8 10.8 0 0 0 1 2.36l-1.73 1.71a1 1 0 0 0 0 1.42l2.82 2.82a1 1 0 0 0 1.42 0l1.71-1.71a10.8 10.8 0 0 0 2.36 1V29a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-2.42a10.8 10.8 0 0 0 2.36-1l1.71 1.71a1 1 0 0 0 1.42 0l2.82-2.82a1 1 0 0 0 0-1.42l-1.71-1.69a10.8 10.8 0 0 0 1-2.36H29a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1zm-1 4h-2.2a1 1 0 0 0-1 .8 9 9 0 0 1-1.29 3.2 1 1 0 0 0 .12 1.26l1.56 1.56-1.41 1.41-1.56-1.56a1 1 0 0 0-1.22-.16 9 9 0 0 1-3.16 1.31 1 1 0 0 0-.8 1V28H15v-2.2a1 1 0 0 0-.8-1 9 9 0 0 1-3.2-1.29 1 1 0 0 0-1.26.12l-1.52 1.56-1.41-1.41 1.56-1.56A1 1 0 0 0 8.49 21a9 9 0 0 1-1.31-3.2 1 1 0 0 0-1-.8H4v-2h2.2a1 1 0 0 0 1-.8A9 9 0 0 1 8.49 11a1 1 0 0 0-.12-1.26L6.81 8.22l1.41-1.41 1.56 1.56a1 1 0 0 0 1.22.12 9 9 0 0 1 3.2-1.31 1 1 0 0 0 .8-1V4h2v2.2a1 1 0 0 0 .8 1A9 9 0 0 1 21 8.49a1 1 0 0 0 1.26-.12l1.56-1.56 1.41 1.41-1.6 1.56a1 1 0 0 0-.12 1.22 9 9 0 0 1 1.31 3.16 1 1 0 0 0 1 .8H28z"/></svg>
                            </span>
                            <span class="sidebar-label settings-label">Settings</span>
                        </a>
                    </li>
                    <li onclick="clickedSubpage('games')">
                        <a href="#games">
                            <span class="sidebar-icon" aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#ffffff" fill-rule="evenodd" d="M1.203 5.169L.784 8.94a2.305 2.305 0 0 0 4.353 1.286L5.5 9.5h3l.363.726a2.305 2.305 0 0 0 4.353-1.286l-.42-3.771A3 3 0 0 0 9.816 2.5h-5.63a3 3 0 0 0-2.982 2.669Zm3.172-.794c.345 0 .625.28.625.625v.542h.542a.625.625 0 1 1 0 1.25H5v.541a.625.625 0 1 1-1.25 0v-.541h-.542a.625.625 0 1 1 0-1.25h.542V5c0-.345.28-.625.625-.625m4.89 3.042a.625.625 0 1 0 0-1.25a.625.625 0 0 0 0 1.25m1.876-2.175a.625.625 0 1 1-1.25 0a.625.625 0 0 1 1.25 0" clip-rule="evenodd"/></svg>
                            </span>
                            <span class="sidebar-label">Games</span>
                        </a>
                    </li>
                    <li onclick="clickedSubpage('links')">
                        <a href="#links">
                            <span class="sidebar-icon" aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z"/></svg>
                            </span>
                            <span class="sidebar-label">Links</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="settings-inner">
                <div class="settings-box">
                    <h1>Settings</h1>
                    <p>Triangle count: <input type="number" value="60" max="60" min="0" style="width: 50px;" onchange="changeTriangleCount(this.value)"></p>
                    <p>Music volume: <br><input type="range" min="0" max="1" step="0.01" onchange="changeVolume(this)" ondrag="changeVolume(this)"></p>
           
                </div>
            </div>
        </nav>
        <!-- <span class="sidebar-background" style="position: relative;">
            <svg class="svgVisualiser" viewBox="0 0 100 1000" width="50px" height="100%">
                <polygon class="polygonVisualiser" points="" stroke="currentColor" stroke-width="3px"></polygon>
            </svg>
        </span> -->
    </div>

    <div class="background">
        <div class="triangles-container" id="trianglesContainer"></div>
    </div>

    <div class="fps-meter" id="fpsMeter">
        <span class="fps-label">FPS:</span>
        <span class="fps-value" id="fpsValue">--</span>
    </div>

    <main class="main-content">
        <div class="content-box header-box">
            <h1>Loading...</h1>
        </div>
    </main>

    <script src="script.js"></script>
    <script src="subPages.js"></script>
    <script>
        const audio = document.querySelector(".audioElement")
        const polygon = document.querySelector(".polygonVisualiser")
        // audio.load()
        // audio.play()

        console.log(audio.volume)

        var context = new AudioContext();
        var src = context.createMediaElementSource(audio);
        var analyser = context.createAnalyser();

        var bufferLength = analyser.frequencyBinCount;
        var dataArray = new Uint8Array(bufferLength);

        src.connect(analyser);
        analyser.connect(context.destination);

        analyser.fftSize = 256 * 4;

        var bufferLength = analyser.frequencyBinCount;
        console.log(bufferLength);
        var dataArray = new Uint8Array(bufferLength);
        
        function update(){
            analyser.getByteFrequencyData(dataArray); 
            
            let pts = [];
            
            for (var i = 0; i < bufferLength; i++) {
                //console.log(dataArray[i])
                if (i == 0)
                {
                    pts.push('0,0');
                    continue
                }
                pts.push(`${dataArray[i] / 256 * 100},${i* (window.innerHeight * 3 / bufferLength)}`);
            }
            polygon.setAttribute("points", pts.join(" "));
            requestAnimationFrame(update);
        }
        update();

        // Changing size of svg so it will fit screen size
        const svg = document.querySelector(".svgVisualiser")
        function changeSVG(){
            svg.setAttribute("viewBox", `0 0 100 ${window.innerHeight * 2}`)
        }

        changeSVG();
        window.addEventListener("resize", changeSVG)
        
        function changeVolume(object){
            audio.volume = object.value
        }
    </script>
</body>
</html>